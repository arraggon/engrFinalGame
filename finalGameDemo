#include <Adafruit_CircuitPlayground.h>

int score = 0;

bool leftButtonPressed;
bool rightButtonPressed;


void setup() {
  Serial.begin(9600);
  CircuitPlayground.begin();
}

void loop() {
  int lightMode;
  int lightTime;
  int lightTimeR;
  int lightTimeL;

  bool slideSwitch = CircuitPlayground.slideSwitch();


  if (slideSwitch) {
    CircuitPlayground.clearPixels();
    CircuitPlayground.redLED(LOW);

    int lightMode = random(1,5);//asndjajsdjfasdfjasjdfjawjsdf
    int lightTime = random(1,6);
    int lightTimeR = random(1,6);
    int lightTimeL = random(1,6);

    switch (lightMode) {
      case 1: 

      Serial.print("lightMode is ");
      Serial.println(lightMode);

      Serial.print("lightTime is ");
      Serial.println(lightTime);

      

      for (int i=0; i<lightTime; i++) {
        CircuitPlayground.setPixelColor(i, 255,   0,   0);
        delay(100);
      }
      break;

      case 2:
      Serial.print("lightMode is ");
      Serial.println(lightMode);

      Serial.print("lightTimeR is ");
      Serial.println(lightTimeR);

      

      for (int i=9; i>lightTime+5; i--) {
        CircuitPlayground.setPixelColor(i, 255,   0,   0);
        delay(100);
      }
      break;

      case 3:
      Serial.print("lightMode is ");
      Serial.println(lightMode);

      Serial.print("lightTimeR is ");
      Serial.println(lightTimeR);

      Serial.print("lightTimeL is ");
      Serial.println(lightTimeL);

      

      for (int i=0; i<lightTimeR || i<lightTimeL; i++) {
        if (i<lightTimeR) {
          CircuitPlayground.setPixelColor(i, 255,   0,   0);
          delay(100);
        }
        if(i<lightTimeL) {
          CircuitPlayground.setPixelColor(9-i, 255,   0,   0);
          delay(100);
        }
      }
      break;

      case 4:
      Serial.print("lightMode is ");
      Serial.println(lightMode);

      CircuitPlayground.setPixelColor(0, 255,   0,   0);
      CircuitPlayground.setPixelColor(1, 255,   0,   0);
      CircuitPlayground.setPixelColor(2, 255,   0,   0);
      CircuitPlayground.setPixelColor(3, 255,   0,   0);
      CircuitPlayground.setPixelColor(4, 255,   0,   0);
      CircuitPlayground.setPixelColor(5, 255,   0,   0);
      CircuitPlayground.setPixelColor(6, 255,   0,   0);
      CircuitPlayground.setPixelColor(7, 255,   0,   0);
      CircuitPlayground.setPixelColor(8, 255,   0,   0);
      CircuitPlayground.setPixelColor(9, 255,   0,   0);

      CircuitPlayground.redLED(HIGH);
      break;
    }

    Serial.println("-----------");

    //-------------------------------------------- input part --------------------------------------------

    int right = 0;

    while (lightMode == 1){
      rightButtonPressed = CircuitPlayground.leftButton();
      leftButtonPressed = CircuitPlayground.rightButton();
      if (right<lightTime && rightButtonPressed) {
        CircuitPlayground.setPixelColor(right, 0,   255,   0);
        right++;
        Serial.println(right);
        delay(1000);
      } else if (right>=lightTime) {
        break;
      }
      Serial.println(right);
    }
  }
}
